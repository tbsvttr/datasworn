:root {
	--bg-primary: #1a1a2e;
	--bg-secondary: #16213e;
	--bg-tertiary: #0f3460;
	--bg-card: #1e2a47;
	--text-primary: #eaeaea;
	--text-secondary: #a0a0a0;
	--text-muted: #666;
	--accent: #e94560;
	--accent-hover: #ff6b6b;
	--border: #2a2a4a;
	--tree-indent: 16px;
	--strong-hit: #22c55e;
	--weak-hit: #eab308;
	--miss: #ef4444;
}

/* Light theme */
[data-theme="light"] {
	--bg-primary: #f5f5f5;
	--bg-secondary: #ffffff;
	--bg-tertiary: #e8e8e8;
	--bg-card: #ffffff;
	--text-primary: #1a1a2e;
	--text-secondary: #555;
	--text-muted: #888;
	--accent: #d63350;
	--accent-hover: #e94560;
	--border: #ddd;
}

* {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

html, body {
	height: 100%;
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
	font-size: 14px;
	line-height: 1.5;
	background: var(--bg-primary);
	color: var(--text-primary);
}

#app {
	display: flex;
	height: 100%;
}

/* Sidebar */
.sidebar {
	width: 320px;
	min-width: 280px;
	max-width: 400px;
	background: var(--bg-secondary);
	border-right: 1px solid var(--border);
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.sidebar-header {
	padding: 16px;
	border-bottom: 1px solid var(--border);
}

.sidebar-header h1 {
	font-size: 18px;
	font-weight: 600;
	margin-bottom: 12px;
	color: var(--accent);
}

.sidebar-header select {
	width: 100%;
	padding: 8px 12px;
	background: var(--bg-tertiary);
	border: 1px solid var(--border);
	border-radius: 4px;
	color: var(--text-primary);
	font-size: 14px;
	cursor: pointer;
}

.sidebar-header select:focus {
	outline: none;
	border-color: var(--accent);
}

/* Toolbar */
.sidebar-toolbar {
	display: flex;
	gap: 8px;
	margin-top: 12px;
}

.toolbar-btn {
	flex: 1;
	padding: 6px 10px;
	background: var(--bg-tertiary);
	border: 1px solid var(--border);
	border-radius: 4px;
	color: var(--text-secondary);
	font-size: 12px;
	cursor: pointer;
	transition: all 0.15s ease;
}

.toolbar-btn:hover {
	background: var(--bg-card);
	color: var(--text-primary);
	border-color: var(--accent);
}

.toolbar-btn.active {
	background: var(--accent);
	color: white;
	border-color: var(--accent);
}

/* Filter toolbar */
.filter-toolbar {
	display: flex;
	gap: 6px;
	margin-top: 10px;
}

.filter-btn {
	flex: 1;
	padding: 6px 8px;
	background: var(--bg-tertiary);
	border: 1px solid var(--border);
	border-radius: 4px;
	color: var(--text-secondary);
	font-size: 11px;
	cursor: pointer;
	transition: all 0.15s ease;
}

.filter-btn:hover {
	background: var(--bg-card);
	color: var(--text-primary);
	border-color: var(--accent);
}

.filter-btn.active {
	background: var(--accent);
	color: white;
	border-color: var(--accent);
}

/* Search */
.search-container {
	position: relative;
	margin-top: 12px;
}

#search-input {
	width: 100%;
	padding: 8px 32px 8px 12px;
	background: var(--bg-tertiary);
	border: 1px solid var(--border);
	border-radius: 4px;
	color: var(--text-primary);
	font-size: 14px;
}

#search-input:focus {
	outline: none;
	border-color: var(--accent);
}

#search-input::placeholder {
	color: var(--text-muted);
}

.search-clear {
	position: absolute;
	right: 4px;
	top: 50%;
	transform: translateY(-50%);
	display: none;
	width: 24px;
	height: 24px;
	background: none;
	border: none;
	color: var(--text-muted);
	font-size: 18px;
	cursor: pointer;
	border-radius: 4px;
}

.search-clear:hover {
	color: var(--text-primary);
	background: var(--bg-secondary);
}

/* Search results */
.search-results {
	flex: 1;
	overflow-y: auto;
	padding: 8px 0;
}

.search-results-count {
	padding: 8px 16px;
	font-size: 12px;
	color: var(--text-muted);
	border-bottom: 1px solid var(--border);
}

.search-result-item {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 10px 16px;
	cursor: pointer;
	transition: background 0.1s;
}

.search-result-item:hover {
	background: var(--bg-tertiary);
}

.search-result-type {
	font-size: 9px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	padding: 3px 6px;
	border-radius: 4px;
	background: var(--text-muted);
	color: white;
	flex-shrink: 0;
}

.search-result-type.type-move { background: #6366f1; }
.search-result-type.type-asset { background: #8b5cf6; }
.search-result-type.type-oracle_rollable { background: #06b6d4; }
.search-result-type.type-npc { background: #f59e0b; }
.search-result-type.type-atlas_entry { background: #10b981; }
.search-result-type.type-truth { background: #ec4899; }

.search-result-name {
	flex: 1;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.search-no-results {
	padding: 24px 16px;
	text-align: center;
	color: var(--text-muted);
}

.tree-container {
	flex: 1;
	overflow-y: auto;
	padding: 8px 0;
}

/* Tree */
.tree-node {
	user-select: none;
}

.tree-node-header {
	display: flex;
	align-items: center;
	padding: 6px 12px;
	cursor: pointer;
	transition: background 0.1s;
}

.tree-node-header:hover {
	background: var(--bg-tertiary);
}

.tree-node-header.selected {
	background: var(--bg-tertiary);
	border-left: 3px solid var(--accent);
}

.tree-toggle {
	width: 16px;
	height: 16px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 4px;
	font-size: 10px;
	color: var(--text-muted);
}

.tree-toggle.expanded {
	transform: rotate(90deg);
}

.tree-icon {
	margin-right: 8px;
	font-size: 12px;
}

.tree-label {
	flex: 1;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.tree-type {
	font-size: 11px;
	color: var(--text-muted);
	margin-left: 8px;
}

.tree-children {
	padding-left: var(--tree-indent);
	display: block;
}

.tree-children.collapsed {
	display: none !important;
}

/* Detail Panel */
.detail-panel {
	flex: 1;
	overflow-y: auto;
	padding: 32px;
	background: var(--bg-primary);
}

.detail-empty {
	color: var(--text-muted);
	text-align: center;
	padding: 48px;
}

/* Breadcrumbs */
.breadcrumbs {
	display: flex;
	align-items: center;
	flex-wrap: wrap;
	gap: 4px;
	margin-bottom: 16px;
	font-size: 13px;
}

.breadcrumb-item {
	color: var(--accent);
	cursor: pointer;
	padding: 2px 6px;
	border-radius: 4px;
	transition: background 0.1s;
}

.breadcrumb-item:hover {
	background: var(--bg-tertiary);
	text-decoration: underline;
}

.breadcrumb-separator {
	color: var(--text-muted);
	font-size: 12px;
}

.breadcrumb-current {
	color: var(--text-secondary);
	padding: 2px 6px;
}

.detail-header {
	margin-bottom: 24px;
}

.detail-header h2 {
	font-size: 28px;
	font-weight: 700;
	margin: 8px 0;
	line-height: 1.2;
}

.detail-id-row {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-top: 4px;
}

.detail-id {
	display: inline-block;
	font-size: 11px;
	color: var(--text-muted);
	background: var(--bg-secondary);
	padding: 4px 8px;
	border-radius: 4px;
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
}

.copy-id-button {
	font-size: 11px;
	font-weight: 500;
	padding: 4px 10px;
	background: var(--bg-tertiary);
	color: var(--text-secondary);
	border: 1px solid var(--border);
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.15s;
}

.copy-id-button:hover {
	background: var(--bg-secondary);
	color: var(--text-primary);
	border-color: var(--text-muted);
}

.copy-id-button:active {
	transform: scale(0.96);
}

.copy-id-button.copied {
	background: var(--accent);
	color: white;
	border-color: var(--accent);
}

/* Type badges */
.type-badge {
	display: inline-block;
	font-size: 10px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	padding: 4px 10px;
	border-radius: 12px;
	background: var(--accent);
	color: white;
}

.type-badge.type-move { background: #6366f1; }
.type-badge.type-asset { background: #8b5cf6; }
.type-badge.type-oracle_rollable { background: #06b6d4; }
.type-badge.type-npc { background: #f59e0b; }
.type-badge.type-atlas_entry { background: #10b981; }
.type-badge.type-truth { background: #ec4899; }
.type-badge.type-move_category,
.type-badge.type-asset_collection,
.type-badge.type-oracle_collection { background: var(--text-muted); }

.detail-content {
	line-height: 1.7;
}

.detail-content a {
	color: var(--accent);
	text-decoration: underline;
	cursor: pointer;
}

.detail-content a:hover {
	color: var(--accent-hover);
}

.detail-content p {
	margin-bottom: 12px;
}

.detail-content p:last-child {
	margin-bottom: 0;
}

.detail-content ul, .detail-content ol {
	margin-bottom: 12px;
	padding-left: 24px;
}

.detail-content li {
	margin-bottom: 4px;
}

.detail-content strong {
	font-weight: 600;
}

.detail-content em {
	font-style: italic;
}

.detail-section {
	margin-bottom: 24px;
}

.detail-section-title {
	font-size: 12px;
	font-weight: 600;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-bottom: 12px;
}

/* Cards */
.card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 8px;
	margin-bottom: 16px;
	overflow: hidden;
}

.card-header {
	padding: 12px 16px;
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	background: var(--bg-secondary);
	border-bottom: 1px solid var(--border);
}

.card-body {
	padding: 16px;
}

/* Move specific */
.roll-type-badge {
	display: inline-block;
	font-size: 11px;
	font-weight: 600;
	padding: 4px 12px;
	border-radius: 4px;
	background: var(--bg-tertiary);
	color: var(--text-secondary);
	margin-bottom: 16px;
}

.trigger-card {
	border-left: 3px solid #6366f1;
}

.stat-pills {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
	margin-bottom: 16px;
}

.stat-pill {
	display: inline-block;
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	padding: 6px 14px;
	border-radius: 20px;
	background: var(--bg-tertiary);
	border: 1px solid var(--border);
	color: var(--text-primary);
}

.move-text {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 8px;
	padding: 20px;
	margin-bottom: 20px;
}

.outcomes {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.outcome-card {
	border-radius: 8px;
	overflow: hidden;
	border: 1px solid var(--border);
}

.outcome-header {
	padding: 10px 16px;
	font-weight: 600;
	font-size: 13px;
}

.outcome-body {
	padding: 16px;
	background: var(--bg-card);
}

.outcome-strong_hit .outcome-header {
	background: var(--strong-hit);
	color: #052e16;
}

.outcome-weak_hit .outcome-header {
	background: var(--weak-hit);
	color: #422006;
}

.outcome-miss .outcome-header {
	background: var(--miss);
	color: #450a0a;
}

/* Asset specific */
.asset-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
}

.asset-category {
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 1px;
	color: var(--accent);
	margin-bottom: 12px;
}

.asset-tags {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
	margin-bottom: 16px;
}

.asset-tag {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	font-size: 11px;
	font-weight: 600;
	padding: 4px 10px;
	border-radius: 12px;
	background: var(--bg-tertiary);
	color: var(--text-secondary);
	border: 1px solid var(--border);
}

.asset-tag-supernatural {
	background: #4c1d95;
	border-color: #7c3aed;
	color: #e9d5ff;
}

.asset-tag-technological {
	background: #164e63;
	border-color: #0891b2;
	color: #cffafe;
}

.asset-tag-sf-friendly {
	background: #1e3a5f;
	border-color: #3b82f6;
	color: #bfdbfe;
}

.asset-tag-si-friendly {
	background: #065f46;
	border-color: #10b981;
	color: #d1fae5;
}

.asset-tag-requires_allies {
	background: #78350f;
	border-color: #f59e0b;
	color: #fef3c7;
}

.asset-requirement {
	font-size: 13px;
	color: var(--text-secondary);
	font-style: italic;
	margin-bottom: 16px;
	padding: 12px;
	background: var(--bg-secondary);
	border-radius: 6px;
}

.asset-description {
	margin-bottom: 20px;
}

.asset-options {
	display: flex;
	flex-wrap: wrap;
	gap: 16px;
	margin-bottom: 20px;
	padding: 16px;
	background: var(--bg-secondary);
	border-radius: 8px;
}

.asset-option {
	display: flex;
	align-items: center;
	gap: 8px;
}

.option-label {
	font-weight: 600;
	color: var(--text-secondary);
}

.option-field {
	color: var(--text-muted);
	border-bottom: 1px solid var(--border);
}

.asset-abilities {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.ability {
	display: flex;
	gap: 12px;
	padding: 16px;
	background: var(--bg-secondary);
	border-radius: 8px;
	border: 1px solid var(--border);
}

.ability-enabled {
	border-color: var(--accent);
}

.ability-checkbox {
	font-size: 18px;
	color: var(--text-muted);
	flex-shrink: 0;
}

.ability-enabled .ability-checkbox {
	color: var(--accent);
}

.ability-content {
	flex: 1;
}

.asset-meter {
	display: flex;
	align-items: center;
	gap: 12px;
	margin-top: 20px;
	padding-top: 20px;
	border-top: 1px solid var(--border);
}

.meter-label {
	font-weight: 600;
	color: var(--text-secondary);
}

.meter-track {
	display: flex;
	gap: 4px;
}

.meter-box {
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--bg-secondary);
	border: 1px solid var(--border);
	border-radius: 4px;
	font-size: 12px;
	font-weight: 600;
}

.impact-list {
	display: flex;
	gap: 16px;
}

.asset-impact {
	display: flex;
	align-items: center;
	font-size: 12px;
	font-weight: 600;
}

.asset-impact::before {
	content: '⬡';
	font-size: 16px;
	margin-right: 4px;
}

/* Oracle specific */
.oracle-summary {
	margin-bottom: 16px;
	color: var(--text-secondary);
}

.dice-badge {
	display: inline-block;
	font-size: 13px;
	font-weight: 600;
	padding: 6px 14px;
	background: var(--bg-tertiary);
	border: 1px solid var(--border);
	border-radius: 6px;
	margin-bottom: 16px;
}

.oracle-table {
	border-radius: 8px;
	overflow: hidden;
	border: 1px solid var(--border);
}

.oracle-table table {
	width: 100%;
	border-collapse: collapse;
}

.oracle-table th {
	background: var(--bg-secondary);
	padding: 12px 16px;
	text-align: left;
	font-weight: 600;
	font-size: 12px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
}

.oracle-table td {
	padding: 12px 16px;
	border-top: 1px solid var(--border);
	background: var(--bg-card);
}

.roll-col {
	width: 80px;
}

.roll-cell {
	font-weight: 600;
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
	color: var(--accent);
}

.oracle-text2 {
	margin-top: 8px;
	padding-top: 8px;
	border-top: 1px dashed var(--border);
	color: var(--text-secondary);
	font-size: 13px;
}

/* Embedded oracle tables in move text */
.embedded-oracle-table {
	margin: 16px 0;
	border-radius: 8px;
	overflow: hidden;
	border: 1px solid var(--border);
}

.embedded-oracle-table table {
	width: 100%;
	border-collapse: collapse;
}

.embedded-oracle-table th {
	background: var(--bg-secondary);
	padding: 10px 14px;
	text-align: left;
	font-weight: 600;
	font-size: 11px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
}

.embedded-oracle-table td {
	padding: 10px 14px;
	border-top: 1px solid var(--border);
	background: var(--bg-card);
}

.embedded-oracle-table .roll-col {
	width: 70px;
}

.embedded-oracle-table .roll-cell {
	font-weight: 600;
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
	color: var(--accent);
}

/* NPC specific */
.npc-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
}

.npc-nature {
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 1px;
	color: #f59e0b;
	margin-bottom: 12px;
}

.npc-summary {
	font-size: 15px;
	color: var(--text-secondary);
	margin-bottom: 16px;
}

.npc-description {
	margin-bottom: 20px;
}

.npc-section {
	margin-bottom: 16px;
}

.npc-section-title {
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	margin-bottom: 8px;
}

.npc-list {
	list-style: none;
	padding: 0;
}

.npc-list li {
	padding: 8px 12px;
	background: var(--bg-secondary);
	border-radius: 4px;
	margin-bottom: 4px;
}

.npc-rank {
	padding-top: 16px;
	border-top: 1px solid var(--border);
	color: var(--text-secondary);
}

/* Atlas specific */
.atlas-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
}

.atlas-summary {
	font-size: 15px;
	color: var(--text-secondary);
	margin-bottom: 16px;
}

.atlas-description {
	margin-bottom: 20px;
}

.atlas-section {
	margin-bottom: 16px;
}

.atlas-section-title {
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	margin-bottom: 8px;
}

.atlas-list {
	list-style: none;
	padding: 0;
}

.atlas-list li {
	padding: 8px 12px;
	background: var(--bg-secondary);
	border-radius: 4px;
	margin-bottom: 4px;
}

/* Truth specific */
.truth-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
}

.truth-summary {
	font-size: 15px;
	color: var(--text-secondary);
	margin-bottom: 20px;
}

.truth-options {
	display: flex;
	flex-direction: column;
	gap: 16px;
}

.truth-option {
	background: var(--bg-secondary);
	border: 1px solid var(--border);
	border-radius: 8px;
	overflow: hidden;
}

.truth-option-header {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	background: var(--bg-tertiary);
}

.truth-option-number {
	width: 28px;
	height: 28px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--accent);
	color: white;
	border-radius: 50%;
	font-weight: 600;
	font-size: 13px;
}

.truth-option-summary {
	font-weight: 600;
}

.truth-option-desc {
	padding: 16px;
}

.truth-quest {
	padding: 16px;
	background: var(--bg-card);
	border-top: 1px solid var(--border);
	font-size: 13px;
}

/* Collection specific */
.collection-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
}

.collection-summary {
	font-size: 15px;
	color: var(--text-secondary);
	margin-bottom: 16px;
}

.collection-description {
	margin-bottom: 20px;
}

.collection-section {
	margin-bottom: 20px;
}

.collection-section-title {
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	margin-bottom: 12px;
}

.collection-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
	gap: 8px;
}

.collection-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 10px 14px;
	background: var(--bg-secondary);
	border-radius: 6px;
	border: 1px solid var(--border);
}

.collection-item .item-name {
	font-weight: 500;
}

.collection-item .item-type {
	font-size: 10px;
	color: var(--text-muted);
	text-transform: uppercase;
}

.collection-folder {
	border-left: 3px solid var(--accent);
}

/* Generic */
.generic-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
}

.generic-field {
	margin-bottom: 16px;
}

.generic-meta {
	color: var(--text-secondary);
	padding-top: 16px;
	border-top: 1px solid var(--border);
}

/* JSON view */
.json-section {
	margin-top: 32px;
	padding-top: 24px;
	border-top: 1px solid var(--border);
}

.json-toggle {
	cursor: pointer;
	user-select: none;
	display: flex;
	align-items: center;
	gap: 8px;
}

.json-toggle::before {
	content: '▶';
	font-size: 10px;
	transition: transform 0.2s;
}

.json-toggle.expanded::before {
	transform: rotate(90deg);
}

.json-view {
	background: var(--bg-secondary);
	padding: 16px;
	border-radius: 6px;
	overflow-x: auto;
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
	font-size: 12px;
	line-height: 1.4;
	white-space: pre-wrap;
	word-break: break-word;
	max-height: 400px;
	margin-top: 12px;
}

.json-view.collapsed {
	display: none;
}

/* Loading */
.loading {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 100%;
	color: var(--text-muted);
}

/* Scrollbar */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
	background: var(--border);
	border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
	background: var(--text-muted);
}

/* Roll button and results */
.roll-button {
	display: inline-block;
	font-size: 13px;
	font-weight: 600;
	padding: 8px 16px;
	background: var(--accent);
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	margin-bottom: 12px;
	transition: background 0.15s, transform 0.1s;
}

.roll-button:hover {
	background: var(--accent-hover);
}

.roll-button:active {
	transform: scale(0.98);
}

.roll-result {
	display: none;
	padding: 10px 14px;
	background: var(--bg-tertiary);
	border: 1px solid var(--accent);
	border-radius: 6px;
	margin-bottom: 12px;
	font-size: 14px;
	animation: fadeIn 0.2s ease-out;
}

.roll-result.show {
	display: block;
}

.roll-result strong {
	color: var(--accent);
}

@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(-4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Highlighted row after rolling */
.roll-highlight {
	animation: highlightPulse 0.3s ease-out;
}

.roll-highlight td {
	background: var(--bg-tertiary) !important;
	border-color: var(--accent) !important;
}

.roll-highlight .roll-cell {
	color: var(--accent-hover) !important;
}

@keyframes highlightPulse {
	0% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.02);
	}
	100% {
		transform: scale(1);
	}
}

/* Odds picker (Ask the Oracle) */
.oracle-odds-picker {
	margin: 16px 0;
	padding: 20px;
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 8px;
}

.oracle-odds-label {
	font-size: 13px;
	color: var(--text-secondary);
	margin-bottom: 12px;
}

.oracle-odds-buttons {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
	margin-bottom: 16px;
}

.odds-button {
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 12px 16px;
	background: var(--bg-secondary);
	border: 1px solid var(--border);
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.15s;
	min-width: 100px;
}

.odds-button:hover {
	background: var(--bg-tertiary);
	border-color: var(--accent);
}

.odds-button.selected {
	background: var(--bg-tertiary);
	border-color: var(--accent);
	box-shadow: 0 0 0 2px rgba(233, 69, 96, 0.3);
}

.odds-name {
	font-size: 12px;
	font-weight: 600;
	color: var(--text-primary);
	margin-bottom: 4px;
}

.odds-threshold {
	font-size: 14px;
	font-weight: 700;
	color: var(--accent);
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
}

.oracle-odds-result {
	display: none;
	padding: 14px 18px;
	background: var(--bg-tertiary);
	border: 1px solid var(--accent);
	border-radius: 8px;
	font-size: 15px;
	animation: fadeIn 0.2s ease-out;
}

.oracle-odds-result.show {
	display: block;
}

.oracle-odds-result strong {
	color: var(--accent);
}

.odds-answer {
	font-weight: 700;
	padding: 2px 8px;
	border-radius: 4px;
}

.odds-answer.odds-yes {
	background: var(--strong-hit);
	color: #052e16;
}

.odds-answer.odds-no {
	background: var(--miss);
	color: #450a0a;
}

.odds-match {
	display: block;
	margin-top: 8px;
	font-size: 13px;
	color: var(--weak-hit);
	font-style: italic;
}

/* Delve specific */
.delve-site-card,
.delve-theme-card,
.delve-domain-card {
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-radius: 12px;
	padding: 24px;
	margin-bottom: 20px;
}

.delve-region {
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 1px;
	color: #10b981;
	margin-bottom: 8px;
}

.delve-rank {
	color: var(--text-secondary);
	margin-bottom: 12px;
}

.delve-refs {
	display: flex;
	flex-direction: column;
	gap: 4px;
	margin-bottom: 16px;
	padding: 12px;
	background: var(--bg-secondary);
	border-radius: 6px;
}

.delve-ref {
	font-size: 13px;
}

.delve-ref a {
	color: var(--accent);
	text-decoration: underline;
}

.delve-summary {
	font-size: 15px;
	color: var(--text-secondary);
	margin-bottom: 16px;
}

.delve-description {
	margin-bottom: 16px;
}

.delve-table {
	border-radius: 8px;
	overflow: hidden;
	border: 1px solid var(--border);
}

.delve-table table {
	width: 100%;
	border-collapse: collapse;
}

.delve-table th {
	background: var(--bg-secondary);
	padding: 12px 16px;
	text-align: left;
	font-weight: 600;
	font-size: 12px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
}

.delve-table td {
	padding: 12px 16px;
	border-top: 1px solid var(--border);
	background: var(--bg-card);
}

.delve-table .roll-col {
	width: 80px;
}

.delve-table .roll-cell {
	font-weight: 600;
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
	color: var(--accent);
}

.delve-table a {
	color: var(--accent);
	text-decoration: underline;
}

.delve-suggestions {
	margin-top: 8px;
	padding-top: 8px;
	border-top: 1px dashed var(--border);
	font-size: 12px;
	color: var(--text-muted);
}

.frequency-cell {
	font-size: 12px;
	text-transform: capitalize;
}

.frequency-cell.frequency-very_common {
	color: var(--strong-hit);
}

.frequency-cell.frequency-common {
	color: #22d3ee;
}

.frequency-cell.frequency-uncommon {
	color: var(--weak-hit);
}

.frequency-cell.frequency-rare {
	color: #f97316;
}

.frequency-cell.frequency-unforeseen {
	color: var(--miss);
}

/* Type badge for Delve types */
.type-badge.type-delve_site { background: #10b981; }
.type-badge.type-delve_site_theme { background: #8b5cf6; }
.type-badge.type-delve_site_domain { background: #f59e0b; }

/* Roll History Panel */
.roll-history-panel {
	position: fixed;
	bottom: 0;
	right: 20px;
	width: 360px;
	max-height: 400px;
	background: var(--bg-card);
	border: 1px solid var(--border);
	border-bottom: none;
	border-radius: 8px 8px 0 0;
	box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
	z-index: 100;
	display: flex;
	flex-direction: column;
	transition: transform 0.2s ease;
}

.roll-history-panel.collapsed {
	transform: translateY(calc(100% - 40px));
}

.roll-history-header {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 10px 14px;
	background: var(--bg-secondary);
	border-bottom: 1px solid var(--border);
	border-radius: 8px 8px 0 0;
}

.roll-history-header h3 {
	flex: 1;
	margin: 0;
	font-size: 13px;
	font-weight: 600;
	color: var(--text-primary);
}

.roll-history-clear,
.roll-history-toggle {
	padding: 4px 10px;
	font-size: 12px;
	font-weight: 500;
	background: var(--bg-tertiary);
	color: var(--text-secondary);
	border: 1px solid var(--border);
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.15s;
}

.roll-history-clear:hover,
.roll-history-toggle:hover {
	background: var(--bg-primary);
	color: var(--text-primary);
}

.roll-history-content {
	flex: 1;
	overflow-y: auto;
	padding: 8px;
	max-height: 350px;
}

.roll-history-empty {
	padding: 20px;
	text-align: center;
	color: var(--text-muted);
	font-size: 13px;
}

.roll-history-entry {
	display: grid;
	grid-template-columns: auto 1fr auto;
	grid-template-rows: auto auto;
	gap: 4px 10px;
	padding: 10px 12px;
	background: var(--bg-secondary);
	border-radius: 6px;
	margin-bottom: 6px;
	animation: slideIn 0.2s ease-out;
}

.roll-history-entry:last-child {
	margin-bottom: 0;
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateY(-8px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.roll-history-time {
	grid-row: 1;
	grid-column: 1;
	font-size: 11px;
	color: var(--text-muted);
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
}

.roll-history-oracle {
	grid-row: 1;
	grid-column: 2;
	font-size: 12px;
	font-weight: 600;
	color: var(--text-primary);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.roll-history-dice {
	grid-row: 1;
	grid-column: 3;
	font-size: 12px;
	color: var(--accent);
	font-family: 'SF Mono', Monaco, 'Courier New', monospace;
}

.roll-history-dice strong {
	color: var(--accent-hover);
}

.roll-history-result {
	grid-row: 2;
	grid-column: 1 / -1;
	font-size: 13px;
	color: var(--text-secondary);
	line-height: 1.4;
}

/* Mobile Toggle Button */
.mobile-menu-btn {
	display: none;
	position: fixed;
	top: 12px;
	left: 12px;
	z-index: 200;
	width: 44px;
	height: 44px;
	background: var(--bg-secondary);
	border: 1px solid var(--border);
	border-radius: 8px;
	color: var(--text-primary);
	font-size: 24px;
	cursor: pointer;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
	transition: background 0.15s, transform 0.15s;
}

.mobile-menu-btn:hover {
	background: var(--bg-tertiary);
}

.mobile-menu-btn:active {
	transform: scale(0.95);
}

/* Sidebar overlay backdrop */
.sidebar-backdrop {
	display: none;
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0.5);
	z-index: 99;
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.2s ease;
}

.sidebar-backdrop.visible {
	opacity: 1;
	pointer-events: auto;
}

/* Mobile styles */
@media (max-width: 768px) {
	.mobile-menu-btn {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.sidebar {
		position: fixed;
		top: 0;
		left: 0;
		bottom: 0;
		width: 85%;
		max-width: 360px;
		z-index: 100;
		transform: translateX(-100%);
		transition: transform 0.25s ease;
		box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
	}

	.sidebar.open {
		transform: translateX(0);
	}

	.sidebar-header {
		padding-left: 60px; /* Clear hamburger button */
	}

	.sidebar-header h1 {
		font-size: 16px;
	}

	.sidebar-backdrop {
		display: block;
	}

	.detail-panel {
		padding: 16px;
		padding-top: 70px; /* Space for mobile menu button */
	}

	/* Adjust roll history for mobile */
	.roll-history-panel {
		right: 10px;
		width: calc(100% - 20px);
		max-width: 360px;
	}

	/* Smaller breadcrumbs on mobile, clear of hamburger */
	.breadcrumbs {
		font-size: 12px;
		padding-left: 50px;
	}

	/* Stack oracle tables on mobile */
	.oracle-table th,
	.oracle-table td {
		padding: 8px 10px;
		font-size: 13px;
	}

	/* Adjust asset cards for mobile */
	.asset-card {
		padding: 16px;
	}

	.asset-header h2 {
		font-size: 18px;
	}
}
